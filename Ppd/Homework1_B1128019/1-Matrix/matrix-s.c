#include <mpi.h>
#include <stdio.h>
#include <stdlib.h>
#define N 100000
int main(int argc, char **argv){MPI_Init(&argc,&argv);double start_total=MPI_Wtime();double comp_time=0.0;double io_time=0.0;int firstA[10][10], firstB[10][10], firstC[10][10];int lastA=0,lastB=0,lastC=0;for(long i=0;i<N;i++){int *A=(int*)malloc(N*sizeof(int));int *B=(int*)malloc(N*sizeof(int));int *C=(int*)malloc(N*sizeof(int));for(long j=0;j<N;j++){A[j]=rand();B[j]=rand();}double start_comp=MPI_Wtime();for(long j=0;j<N;j++){C[j]=A[j]+B[j];}double end_comp=MPI_Wtime();comp_time+=(end_comp-start_comp);if(i<10){for(int j=0;j<10;j++){firstA[i][j]=A[j];firstB[i][j]=B[j];firstC[i][j]=C[j];}}if(i==N-1){lastA=A[N-1];lastB=B[N-1];lastC=C[N-1];}free(A);free(B);free(C);}double end_total=MPI_Wtime();io_time=(end_total-start_total)-comp_time;printf("First 10x10 of A:\n");for(int i=0;i<10;i++){for(int j=0;j<10;j++){printf("%d ",firstA[i][j]);}printf("\n");}printf("First 10x10 of B:\n");for(int i=0;i<10;i++){for(int j=0;j<10;j++){printf("%d ",firstB[i][j]);}printf("\n");}printf("First 10x10 of C:\n");for(int i=0;i<10;i++){for(int j=0;j<10;j++){printf("%d ",firstC[i][j]);}printf("\n");}printf("Last element of A: %d\n",lastA);printf("Last element of B: %d\n",lastB);printf("Last element of C: %d\n",lastC);printf("I/O time: %lf\n",io_time);printf("CPU computation time: %lf\n",comp_time);printf("Total simulation time: %lf\n",end_total-start_total);MPI_Finalize();return 0;}
